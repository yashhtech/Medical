{% load static %}

<!DOCTYPE html>
<html>
<head>
    <title>Login | Medical Clinic</title>
    <link rel="stylesheet" href="{% static 'css/loginv2.css' %}">
</head>
<body>

<!-- BACK BUTTON -->
{% if role %}
    {# Role login page ‚Üí back to login options #}
    <a href="{% url 'login' %}" class="back-btn">‚Üê Back</a>
{% else %}
    {# Login options ‚Üí back to home #}
    <a href="{{ login_entry|default:'/' }}" class="back-btn">‚Üê Back</a>
{% endif %}





<div class="login-page">

    <div class="overlay"></div>
        {% if messages %}
    <div class="message-container">
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                {{ message }}
            </div>
        {% endfor %}
    </div>
    {% endif %}

    <div class="login-card">

    <!-- LOGO -->
    <div class="login-logo">
        <img src="{% static 'images/clini.png' %}">
    </div>

    {% if not role %}
    <!-- ================= LOGIN OPTIONS ================= -->
    <h2>Welcome to Medical Clinic</h2>
    <p>Select Login Type</p>

    <div class="login-options">
        <a href="?role=patient" class="login-option patient">üë§ Login as Patient</a>
        <a href="?role=doctor" class="login-option doctor">ü©∫ Login as Doctor</a>
        <a href="?role=admin" class="login-option admin">üîê Login as Admin</a>
        <a href="?role=new_patient" class="login-option new-patient">‚ûï New Patient</a>
    </div>

    {% elif role == "new_patient" %}
    <!-- ================= NEW PATIENT REGISTER ================= -->
    <h2 style="text-align:center;">
        Registering with MyClinic is now one step easy. Lets Collaborate !!
    </h2>

    <p>
        This registration is verified by our team. For more info   <br>        
        <span style="color:blue;"> Call +91 9496 947 548</span>
    </p>

    <form class="new_patient-form" action="{% url 'new_patient_register' %}" method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="form-row">
            <select name="salutation" required>
                <option>Salutation</option>
                <option>Miss.</option>
                <option>Mr.</option>
                <option>Ms.</option>
            </select>
            <input type="text" name="name" placeholder="Name" required>
        </div>

        <div class="form-row">
            <select name="gender" required>
                <option value="">Gender</option>
                <option>Male</option>
                <option>Female</option>
                <option>Others</option>
            </select>
            <input type="text" name="age" placeholder="Age" required>
        </div>

        <!-- FILE UPLOAD SECTION -->
    <div class="upload-section">
     <div class="upload-box">
        <label>
            üñºÔ∏è Doctor Profile Image
            <span>(JPG / PNG)</span>
        </label>
        <input type="file" name="image" accept="image/*">
     </div>

     <div class="upload-box">
        <label>
            üìÑ Certification / Document
            <span>(PDF / JPG)</span>
        </label>
        <input type="file" name="document" accept=".pdf,image/*">
     </div>
     </div>

        <div class="form-row">
            <input type="email" name="email" placeholder="Email" required>
            <input type="password" name="password" placeholder="Password" required>
        </div>

        <div class="form-row">
            <input type="text" name="mobile" placeholder="Mobile" required>
            <input type="password" name="confirm_password" placeholder="Confirm Password" required>  
        </div>

        <div class="form-row">
            <input type="text" name="address" placeholder="Address" required>
            <!-- add more in future -->
        </div>

        <button type="submit">Register with us</button>
    </form>

    {% else %}
    <!-- ================= LOGIN FORM ================= -->
    <h2>{{ role|title }} Login</h2>

    <form method="post" action="{% url 'role_login' role %}"  class="login-form">
        {% csrf_token %}
        <input type="email" name="email" placeholder="Email" required>
        <input type="password" name="password" placeholder="Password" required>
        <button type="submit">Login as {{ role|title }}</button>
    </form>

    {% endif %}

</div>

    </div>
</div>

</body>
</html>
